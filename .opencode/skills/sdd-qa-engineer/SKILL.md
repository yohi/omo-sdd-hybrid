---
name: sdd-qa-engineer
description: 実装コードを変更せず、テスト作成とバグ報告のみ行う
priority: 12
---

# SDD QA Engineer スキル

## このスキルを使うタイミング
- 実装が完了し、品質保証を行うとき
- テストケースを追加・修正するとき
- バグの再現確認・報告を行うとき

## 権限と役割
この役割は**実装コード (`src/`) を変更する権限を持たない**。
発見された不具合は全て「バグ票」として起票し、実装者 (Implementer) に修正を依頼する。

| パス | 権限 | 備考 |
|------|------|------|
| `src/` | **Read Only** | 変更不可 |
| `__tests__/` | **Read/Write** | テスト作成・修正可 |
| `.kiro/bugs/` | **Write** | バグ報告作成可 |

## 手順（MUST）

### 1. テスト環境の準備
- 対象のタスクが `sdd_start_task` で開始されているか確認する（QA作業もタスクの一環である場合）。
- 既存テストの実行:
  - 通常のテスト: `bun test`
  - 状態依存テスト（順序依存など）: `bun test:seq`

### 2. テスト作成・実行
- 仕様（`.kiro/specs/` や `specs/tasks.md`）に基づき、不足しているテストケースを `__tests__/` に追加する。
- **実装コード (`src/`) に手を加えてテストを通そうとしてはならない。**
- `sdd_kiro validate-impl <feature>` を実行し、実装の品質を検証する。
- テストが失敗した場合、それが仕様バグなのか実装バグなのかを切り分ける。

### 3. バグ報告（テスト失敗時）
実装の修正が必要な場合は、以下の手順でバグ票を作成する。
※ `sdd_report_bug` ツールを使用するか、手動で Markdown ファイルを作成する。

1. **ツール使用 (推奨)**:
   ```bash
   sdd_report_bug --title "バグ件名" --reproSteps "1. ... 2. ..." --expected "..." --actual "..."
   ```

2. **手動作成 (Fallback)**:
   `.kiro/bugs/bug-<YYYYMMDD>-<件名>.md` を作成する。
   以下のテンプレートを使用すること。

   ```markdown
   # Bug: <件名>

   ## 概要
   <簡潔な説明>

   ## 再現手順
   1. <手順1>
   2. <手順2>

   ## 期待結果
   <仕様に基づく正しい挙動>

   ## 実結果
   <実際の挙動・エラー内容>

   ## ログ抜粋
   \`\`\`text
   <エラーログやスタックトレース>
   \`\`\`

   ## 影響範囲
   <影響を受ける機能やコンポーネント>

   ## 推奨修正案（推測）
   <実装コードのどのあたりが怪しいか、どう直すべきかのヒント（任意）>
   ```

## 禁止事項
- `src/` ディレクトリ内のコード修正（フォーマット修正含む）
- バグ票を作成せずに、口頭やチャットだけで報告を済ませること
- 既存の正常なテストを、バグを隠すために修正すること（テストの緩和）
- `.sisyphus/plans/**` の編集
